<!DOCTYPE html>
<html lang="en">
<head>
    <title>Test Driven Development</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="node_modules/@shower/ribbon/styles/styles.css">
    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
        }
    </style>
</head>
<body class="shower full">

<!--     <header class="caption">
        <h1>Test driven development</h1>
        <p>Методология разработки через тестирование</p>
    </header> -->

    <section class="slide" id="cover">
        <!-- <h2>Test driven development</h2> -->
        <!-- <p>Petr Karmashev</p> -->
        <figure>
            <img class="cover" src="pictures/tdd2.png">
        </figure>
        <style>
            #cover h2 {
                margin: 30px 0 0;
                color: white;
                text-align: center;
                font-size: 70px;
            }

            #cover p {
                margin: 10px 0 0;
                text-align: center;
                color: white;
                font-style: italic;
                font-size: 20px;
            }

            #cover p a {
                color: white;
            }

            .center {
                text-align: center;
            }
        </style>
    </section>

    <section class="slide">
        <h2>Круг разработки через тестирование</h2>
        <ol>
            <li>Тест</li>
            <li>Реализация</li>
            <li>Рефакторинг</li>
        </ol>
    </section>

    <section class="slide">
        <h2 class="shout shrink">Тест</h2>
    </section>

    <section class="slide">
        <h2>Тест</h2>
        <p>Тест на минимальную функциональность (в идеале строка, атомарная операция, одно условие, один вызов метода)</p>
		<p>Запуск теста, который должен упасть (даже по причине отсутствия метода)</p>
    </section>

    <section class="slide">
        <h2 class="shout shrink">Реализация</h2>
    </section>

    <section class="slide">
        <h2>Реализация</h2>
        <p>Цель сделать чтобы тест проходил минимально возможным способом</p>
		<p>(30 секунд)</p>
    </section>

    <section class="slide">
        <h2 class="shout shrink">Рефакторинг</h2>
    </section>

    <section class="slide">
        <h2>Рефакторинг реализации</h2>
		<p>На соответствие правилам кода проекта, оптимизация решения</p>
    </section>

    <section class="slide">
        <h2>Рефакторинг теста</h2>
		<p>Проверить что названия тестовых методов отражает смысл проверки</p>
		<p>Удалить лишние, повторяющиеся тест кейсы</p>
    </section>

    <section class="slide">
        <h2 class="shout shrink">Законы</h2>
    </section>

    <section class="slide">
        <h2>Законы</h2>
        <ol>
            <li>В проде не должно быть кода, который не чинит сломанные тесты</li>
            <li>Каждый класс должен иметь набор тестов, а каждый публичный метод свой тест</li>
        </ol>
    </section>

    <section class="slide">
        <h2 class="shout shrink">Плюсы и минусы подхода</h2>
    </section>

    <section class="slide">
        <h2>Плюсы</h2>
        <ol>
			<li>Понятны критерии прохождения теста и завершения задачи</li>
			<li>Быстрая обратная связь - сразу видно где проблема</li>
			<li>Быстрее написание кода - понятен следующий шаг, шаги маленькие</li>
			<li>Высокое покрытие, уверенность в коде</li>
            <li>Чистый лист, понятно с чего начать, готовая методология написания кода</li>
			<li>Чистый код, за счет тестируемости - SOLID</li>
			<li>Проще и понятнее рефакторинг</li>
        </ol>
    </section>

    <section class="slide">
        <h2>Еще плюсы</h2>
        <ol>
			<li>Тесты и рефакторинг включены в стоимость решения задачи, пока пишешь тест - думаешь над результатом реализации</li>
			<li>Меньше техдолг</li>
            <li>Сразу видны недостатки в требованиях</li>
			<li>Готовое описание работы класса для того кто собирается его использовать. Ревью можно делать начиная с чтения тестов</li>
			<li>Сначала думаешь, потом пишешь код</li>
        </ol>
    </section>

    <section class="slide">
        <h2>Минусы</h2>
        <ol>
			<li>Непривычно думать наоборот</li>
			<li>Хрупкость, нужно часто править тесты, т.к. они будут меняться за архитектурой</li>
			<li>Нужно поддерживать моки</li>
			<li>На практике не учитывается клиентский код и конфигурация - тесты могут проходить но проект не будет рабочим</li>
        </ol>
    </section>

    <section class="slide">
        <h2>Еще минусы</h2>
        <ol>
			<li>Бывает что легко добавить одну строку в тестируемый метод, например для обработки эксепшена или null, а тест на этот случай писать долго и велик соблазн сразу добавить строку</li>
			<li>Не всегда подходит если требования спускаются в виде сложного, уже готового алгоритма</li>
        </ol>
    </section>

    <section class="slide">
        <h2 class="shout shrink">Подробнее про минусы</h2>
    </section>

    <section class="slide">
        <h2>Думать наоборот</h2>
        <p>Окупается при вырабатывании привычки</p>
    </section>

    <section class="slide">
        <h2>Хрупкость</h2>
        <p>Барьер для излишнего усложнения архитектуры, ее доказанная оправданность</p>
    </section>

    <section class="slide">
        <h2>Моки</h2>
        <p>Есть библиотеки для их генерации</p>
        <p>Моки это хорошее минимальное описание поведения внешннго сервиса, при их анализе можно заметить ошибки проектирования и лучше понять поведение</p>
    </section>

    <section class="slide">
        <h2>Не учитывается клиентский код</h2>
        <p>Кроме юнитов, необходим иной слой тестов - end to end, приемочные, которые тоже можно рассмотреть в цикле bdd->tdd</p>
        <figure>
            <img class="center" src="pictures/bdd-tdd.png">
        </figure>
    </section>

    <section class="slide">
        <h2>Легко добавить одну строку</h2>
        <p>Проблема в том что если строка не была покрыта, то содержит потенциальный баг - неверное поведение, условие, или является избыточной</p>
    </section>

    <section class="slide">
        <h2>Не всегда подходит для алгоритмов</h2>
        <p>Частично решается разбиением алгоритма на тестируемые части</p>
    </section>

    <section class="slide">
        <h2 class="shout shrink">Use TDD or die trying!</h2>
    </section>

    <div class="progress"></div>

    <script src="node_modules/shower-core/shower.min.js"></script>
</body>
</html>
